cvizlab: "0.2.0"
info:
  id: how-gdp
  name: How GDP Works 
  date: 2017-09-19
  publish-date: 2018-10-12
  path: /how-gdp
  analytics-id: 
  description: >-
    Explanation of how the Geo Data Portal works.
  keywords: >-
    USGS, VIZLAB, GDP
  audience: GDP current and future users
  url: 
  twitter: "@USGS-R"
  thumbnail-facebook:
    url: 
    width: 1560
    height: 820
    alttext: ""
    type: image/png
  thumbnail-twitter:
    url: 
    width: 560
    height: 300
    alttext: ""
  thumbnail-landing:
    url: images/vizlab06.png
    width: 400
    height: 400
    alttext: ""
  required-packages:
    vizlab:
      repo: CRAN
      version: 0.2.0
    sf:
      repo: CRAN
      version: 0.5-4
    sp: 
      repo: CRAN
      version: 1.2.5
    geoknife:
      repo: CRAN
      version: 1.5.5
    dplyr:
      repo: CRAN
      version: 0.7.2
    tidyr:
      repo: CRAN
      version: 0.7.1
    maps:
      repo: CRAN
      version: 3.2.0
contributors:
  - 
    name: Dave Blodgett
    email: dblodgett@usgs.gov
    affiliation: U.S. Geological Survey
  -
    name: Lindsay Carr
    email: lcarr@usgs.gov
    affiliation: U.S. Geological Survey
  -
    name: Jordan Read
    email: jread@usgs.gov
    affiliation: U.S. Geological Survey
  -
    name: David Watkins
    email: wwatkins@usgs.gov
    affiliation: U.S. Geological Survey
parameter:
  -
    id: storm_dates
    comment: dates to timebox storm for getting data
    start_date: "2008-06-02"
    end_date: "2008-06-13"
  -
    id: display_crs	
    comment: projecting into
    crs_str: "+init=epsg:5070"
  - 
    id: geoknife_crs
    comment: needed to create a simplegeom for geoknife
    crs_str: "+proj=longlat +datum=WGS84"
  -
    id: example_dateTime
    comment: use one timestep to illustrate geoknife processing
    date: "2008-06-07 20:00:00 UTC"
  -
    id: precip_bins
    comment: number of bins for precip scale
fetch:
  -
    id: fetch_yahara_shp
    comment: get shapefile as R object
  -
    id: fetch_yahara_precip
    comment: use transposed yahara as stencil (need dates)	
  -
    id: fetch_yahara_precip_raw
    comment: use transposed yahara, don't process to each area
  -
    id: fetch_context_geometry
    comment: create spatial object of area around yahara (maybe just make bbox)	
  -
    id: fetch_context_precip_raw
    comment: get raw precip data from gdp for area around yahara
  -
    id: fetch_page_text
    comment: identify yaml file w/ site text
process:
  -
    id: process_yahara_transpose
    comment: move yahara north	
  -
    id: process_yahara_precip	
    comment: order ids for mapping + keep all timesteps	
  -
    id: process_yahara_precip_raw	
    comment: order ids for mapping + keep all timesteps	
  -
    id: process_yahara_precip_cumulative
    comment: order ids for mapping + calculate & keep cumulative
  -
    id: process_context_precip
    comment: order ids for mapping + keep all timesteps		
visualize:
  -
    id: visualize_inputs_data	
    comment: map of raw gdp data through time for area around yahara	
  -
    id: visualize_inputs_geometry	
    comment: map of transposed yahara w. surrounding area for context
  -
    id: visualize_yahara_precip_raw	
    comment: map w. raw gdp data for yahara transpose only
  -
    id: visualize_yahara_precip_melt
    comment: map w. raw gdp data for yahara transpose only
  -
    id: visualize_storm_transpose	
    comment: map showing yahara shape move up to yahara-shaped precip
publish:
  -
    id: publish_usgs_logo
    location: images/usgsLogo.png
    mimetype: image/png
    title: "USGS Logo"
    alttext: "USGS Logo"
  -
    id: publish_processing_schematic
    location: images/processing_schematic.gif
    mimetype: image/png
    export: true
    title: "GDP Processing Schematic"
    alttext: "GDP Processing Schematic"
  -
    id: publish_algorithm_schematic
    location: images/algorithm_old.png
    mimetype: image/png
    title: "GDP Algorithm Schematic"
    alttext: "GDP Algorithm Schematic"
  -  
    id: publish_gdp_figure_css
    location: layout/css/gdp-figure.css
    mimetype: text/css
  -
    id: publish_sourcesanspro
    publisher: googlefont
    family: Source Sans Pro
    weight: [300, 400, 600]
  - 
    id: publish_header
    publisher: section
    template: header-template
    depends: "publish_usgs_logo"
    context:
      id: header
      title: How the Geo Data Portal works
      logo: publish_usgs_logo
      caption: Expalanation of how the GDP works
  -
    id: publish_footer
    publisher: section
    template: footer-template
    depends: "publish_usgs_logo"
    context:
      blogsInFooter: FALSE
      usgsLogo: publish_usgs_logo
      github-url: https://github.com/USGS-VIZLAB/how-gdp
  - 
    id: publish_gdp_overview
    publisher: section
    template: layout/templates/gdp-text.mustache
    depends: "fetch_page_text"
    context:
      id: gdp-text
      text: fetch_page_text.gdp_overview
  - 
    id: publish_gdp_processing
    publisher: section
    template: layout/templates/gdp-figure.mustache
    depends: ["publish_processing_schematic", "fetch_page_text"]
    context:
      id: gdp-fig
      title: "Bandwidth and processing savings with GDP"
      figure: publish_processing_schematic
      figure-caption: >-
        Schematic of how processing and bandwidth are saved using the GDP
      text-before: fetch_page_text.gdp_processing_before
      text-after: fetch_page_text.gdp_processing_after
  - 
    id: publish_gdp_algorithm
    publisher: section
    template: layout/templates/gdp-figure.mustache
    depends: ["publish_algorithm_schematic", "fetch_page_text"]
    context:
      id: gdp-fig
      title: "GDP algorithm support"
      figure: publish_algorithm_schematic
      figure-caption: ""
      text-before: fetch_page_text.gdp_algorithm_before
      text-after: fetch_page_text.gdp_algorithm_after
  -
    id: publish_use_case_intro
    publisher: section
    template: layout/templates/gdp-text.mustache
    depends: "fetch_page_text"
    context:
      id: gdp-text
      title: 
      text: fetch_page_text.use_case_intro
  -
    id: publish_storm_transpose
    publisher: section
    template: layout/templates/gdp-figure.mustache
    depends: ["visualize_storm_transpose", "fetch_page_text"]
    context:
      id: gdp-fig
      title: Animation of storm transposition
      figure: storm-transpose
      text-before: fetch_page_text.storm_transpose_before
      text-after: fetch_page_text.storm_transpose_after
  - 
    id: publish_inputs_data
    publisher: section
    template: layout/templates/gdp-figure.mustache
    depends: ["visualize_inputs_data", "fetch_page_text"]
    context:
      id: gdp-fig
      title: "Precip overtime for original storm location"
      figure: precip-timeseries-map
      text-before: fetch_page_text.inputs_data_before
      text-after: fetch_page_text.inputs_data_after
  - 
    id: publish_inputs_geometry
    publisher: section
    template: layout/templates/gdp-figure.mustache
    depends: ["visualize_inputs_geometry", "fetch_page_text"]
    context:
      id: gdp-fig
      title: 
      figure: "visualize_inputs_geometry"
      text-before: fetch_page_text.inputs_geometry_before
      text-after: fetch_page_text.inputs_geometry_after
  -
    id: publish_yahara_precip
    publisher: section
    template: layout/templates/gdp-figure.mustache
    depends: ["visualize_yahara_precip_raw", "visualize_yahara_precip_melt", "fetch_page_text"]
    context:
      id: gdp-fig-two
      title:
      figure: ["visualize_yahara_precip_raw", "visualize_yahara_precip_melt"]
      text-before: fetch_page_text.yahara_precip_before
      text-after: fetch_page_text.yahara_precip_after
  -
    id: publish_conclusion_text
    publisher: section
    template: layout/templates/gdp-text.mustache
    depends: "fetch_page_text"
    context:
      id: gdp-text
      text: fetch_page_text.conclusion
  - 
    id: publish_gdp_page
    name: index
    publisher: page
    template: fullpage
    depends: ["publish_header", "publish_footer", "publish_gdp_figure_css", 
      "lib-header-css", "lib-footer-css", "lib-vizlab-favicon", "publish_sourcesanspro", 
      "publish_gdp_overview", "publish_gdp_processing", "publish_gdp_algorithm", 
      "publish_use_case_intro", "publish_storm_transpose", "publish_inputs_data", 
      "publish_inputs_geometry", "publish_yahara_precip", "publish_conclusion_text"]
    context:
      header: header
      resources: [publish_gdp_figure_css, lib-header-css, lib-footer-css, lib-vizlab-favicon, publish_sourcesanspro]
      sections: ["publish_gdp_overview", "publish_gdp_processing", "publish_gdp_algorithm", 
        "publish_use_case_intro", "publish_storm_transpose", "publish_inputs_data", 
        "publish_inputs_geometry", "publish_yahara_precip", "publish_conclusion_text"]
